{% extends 'arcsecond/white-navbar.html' %}

{% load staticfiles %}
{% load i18n %}

{% block head_end_block %}
    {{ block.super }}
    <link href="{% static 'webapp/observingsites-angular.css' %}" rel="stylesheet">
{% endblock head_end_block %}

{% block navbar_left_block %}
    <ul class="nav navbar-nav">
        <li>
            <p class="navbar-text">
                <span class="navbar-title"> > &nbsp;&nbsp;</span>
                <img src="{% static 'arcsecond/img/ObservatoryIcon_512x512.png' %}" width=25px>
                <span class="navbar-title">Observing Sites</span>
            </p>
        </li>
    </ul>
{#    <form class="navbar-form navbar-left" role="search">#}
{#        <div class="form-group">#}
{#            <input type="text" class="form-control" placeholder="Find Observing Site">#}
{#        </div>#}
{#    </form>#}
{% endblock navbar_left_block %}

{% block body_block %}

    <div class="site-wrapper" ng-app="arcsecondApp">

        <div class="row" ng-controller="ObservingSitesNavigationCtlr as sitesCtlr" id="ObservingSitesNavigationCtlr">
            <div class="col-md-2 col-md-offset-2" id="continent-list-container">
                <ul class="nav nav-pills nav-stacked text-right left">
                    <li role="presentation" ng-repeat="continent in sitesCtlr.continents">
                        <a data-target="#" data-toggle="pill" href="#" ng-click="sitesCtlr.selectContinent(continent.key)">[[continent.name]]
                            <span class="badge">[[ sitesCtlr.sites[continent.key].length ]]</span>
                                <button class="btn btn-info plus-button"
{#                                        onClick="parent.location='{% if user.is_authenticated %}{% url 'observingsite-new' %}{% else %}{% url 'account_login' %}{% endif %}'"#}
                                        >
                                    +
                                </button>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="col-md-3" id="site-list-container">
                <div ng-repeat="continent in sitesCtlr.continents">
                    <ul class="nav nav-pills nav-stacked site-list [[continent.key]] dark">
                        <li role="presentation" ng-repeat="site in sitesCtlr.sites[continent.key]">
                            <a data-target="#" data-toggle="pill" href="#"
                               ng-click="sitesCtlr.selectSite(continent.key, $index)">
                                <img src="{% static 'arcsecond/img/ObservatoryIcon_512x512.png' %}" width="20px">
                                <span class="site name">[[site.long_name]]</span><br/>
                                <span class="site country">[[site.country]]</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="col-md-3" id="site-property-container" ng-show="sitesCtlr.selectedSite">
                <pre>[[ sitesCtlr.selectedSite | json ]]</pre>
            </div>
        </div>

        <div id="map-canvas-container" class="fluid-row">
            <div id="map-canvas"></div>
        </div>

    </div>

{% endblock body_block %}

{% block after_body_raw_block %}
    {{ block.super }}
    <script src="{% static 'webapp/app.js' %}"></script>
    <script src="{% static 'webapp/controllers.js' %}"></script>
    <script src="{% static 'webapp/maps.js' %}"></script>
{% endblock after_body_raw_block %}

