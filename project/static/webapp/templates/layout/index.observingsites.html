<div class="site-wrapper">
    <div class="container">

        <div class="row" id="search-container">
            <div class="col-md-10">
                <input autocomplete="off"
                       autofocus="autofocus"
                       id="search-input"
                       placeholder="Find a Site by Name or Country. Or Enter New Name to Create One!"
                       type="text"
                       ng-model="searchString" />

                <div class="search_subtitle">
                    Total: {{ all_observingsites.length }},
                    Sources: <a target="_self" href="http://onekilopars.ec/apps">iObserve</a>,
                    <a target="_self" href="http://www.clearskyinstitute.com/xephem/">Xephem</a> (filtered),
                    <a href="/observingsites/activity">See Observing Sites Activity > </a>
                </div>

            </div>

            <div class="col-md-2">
                <div class="btn-group">
                    <label class="checkbox-label">
                        <input type="checkbox" ng-model="filter_observingsites" ng-change="toggleMapBoundsFiltering()">
                        Automatic Map Bounds Filtering
                    </label>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-10" id="observingsites-container">
                <div my-loading-spinner="viewLoading"></div>
                <div ng-show="searchString.length > 0" class="observingsite__new">
                    Create New Site with Name:
                    <button id="createButton" type="button" class="btn btn-primary" ng-click="createNewObservingSite(this, searchString)">{{ searchString }}</button>
                </div>

                <div ng-repeat="observingsite in observingsites | filter:searchString">
                    <div class="col-md-12">
                        <observingsite observingsite="observingsite" data-ng-click="zoomInToObservingSite(observingsite)"></observingsite>
                    </div>
                </div>
            </div>

        </div>

    </div>
</div>

<div id="map-canvas-container" class="fluid-row">
    <ui-gmap-google-map center='map.center' zoom='map.zoom' options="map.options" events="map.events">

        <ui-gmap-window show="map.windowOptions.show" coords="map.window.model.coords" closeClick="map.closeClick()">
            <div>
                <h5>{{map.window.model.name}}</h5>
                {{map.window.model.country}}
            </div>
        </ui-gmap-window>

        <ui-gmap-markers
                idkey="'idKey'"
                models="map.markers"
                coords="'coords'"
                docluster="true"
                fit="false"
                icon="'icon'"
                events="map.markersEvents">

        </ui-gmap-markers>

    </ui-gmap-google-map>
</div>
